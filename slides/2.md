---
marp: true
---

<script src="../node_modules/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true, theme:"neutral", mirrorActors:false});</script>

<link rel="stylesheet" href="res/styles.css">
<link rel="stylesheet" href="res/fontawesome.css">

# Internet e WWW

Internet è una rete di computer che comunicano tra loro.
*World Wide Web* è una applicazione di Internet che permette di scambiare documenti ipertestuali, che contengono link ad altri documenti.
WWW si basa su protocolli **client-server**.

<div class="container">
<div class="content">
<div class="mermaid">
%%{init: {'theme': 'neutral', 'mirrorActors': false} }%%
sequenceDiagram
    Client->>Server: richiesta
	activate Server
    Server-->>Client: risposta
	deactivate Server

</div>
</div>
</div>

---

## Http

È il protocollo per WWW. Faremo richieste **GET** e **POST**.

```
GET / HTTP 1.1
Host: www.condomini.com/dashboard?condominio=vicolo+corto
```

ci connettiamo a `www.condomini.com`, chiediamo la pagina `/dashboard` e passiamo il parametro `condominio` con valore `vicolo+corto`.


```html
<html>
	<body>
		<div>Mario Rossi</div>
		<div>Luigi Verdi</div>
	</body>
</html>
```
La`POST` ha anche un *body* con altri dati da inviare.

---

# Il browser web

Il browser è un programma che permette di fare richieste e visualizzare risposte.
Quando viene scaricata la risposta HTTP, il browser interpreta il codice che è arrivato.
1) carica il codice HTML nel **DOM** (Document Object Model)
2) mostra a schermo il **rendering** con lo stile CSS
3) **interpreta** il e il codice Javascript viene eseguito.

In più il browser gestisce gli **eventi** dell'utente, come il click del mouse o la pressione di un tasto, e si possono definire con Javascript.

Useremo il browser con gli strumenti sviluppatore (*network*, *inspector*, *style editor*, *console*).

---

## Dom

Ha una struttura ad albero, ogni nodo è un elemento HTML.

<div class="container">
<div class="content" style="align-items: unset">

```html
<div class="container">
	<div class="content">
		<h1 id="condomini">Condomini</h1>
		<ul>
		<li><a href="/dashboard?condominio=
		vicolo+corto">Vicolo Corto</a></li>
		</ul>
		<li><a href="/dashboard?condominio=
		bastioni+gran+sasso">Bastioni Gran Sasso</a></li>
		</ul>
	</div>
	<div class="content">
		<h1 id="residenti">Residenti</h1>
		<ul>
		<li><a href="/dashboard?residente=
		mario+rossi">Mario Rossi</a></li>
		<li><a href="/dashboard?residente=
		luigi+verdi">Luigi Verdi</a></li>
		</ul>
	</div>
</div>
```
</div>
<div class="content">

<div class="container">
<div class="content">
<div class="mermaid" style="max-height:22vh;">
%%{init: {'theme': 'neutral', 'mirrorActors': false} }%%
flowchart TD
	A[div] --> B[div]
	A --> C[div]
	B --> D[h1]
	B --> E[ul]
	C --> F[h1]
	C --> G[ul]
	E --> H[li] --> L[a]
	E --> I[li] --> M[a]
	G --> J[li] --> N[a]
	G --> K[li] --> O[a]
</div>
</div>
</div>

</div>

</div>

La sintassi è `<nome-tag attributo-1="valore-1" ... attributo-n="valore-n">`

---

## Css

Cascading Style Sheets è un linguaggio per descrivere lo stile di un documento HTML. Le regole si applicano da quelle più specifiche a quelle più generali.

```css
h1 { color: purple; }

.container { display: flex; align-items: center; flex-direction: row; }

.content { display: flex; width: 100%; align-items: center; flex-direction: column; }

#condomini { color green; }
```
1. **stile inline** `style="color:red"` ha la precedenza su tutte le regole.
2. **id** `#condomini` identifica un elemento
3. **classe** `.container` e `.content` sono le classi per contenitore e contenuto
4. **elemento** `h1` mette a neutral il colore di tutti gli h1

Si possono comporre selettori con spazi, ad esempio `#condomini .container`

---

## Resa grafica

<html>

<div style="border: 3px solid #224466; padding: 20px; margin-bottom: 20px;">
	<div class="container">
		<div class="content">
			<h1 class="h1_mock" id="condomini">Condomini</h1>
			<ul>
			<li><a href="#">Vicolo Corto</a></li>
			</ul>
			<li><a href="#">Bastioni Gran Sasso</a></li>
			<li>...</li>
			</ul>
		</div>
		<div class="content">
			<h1 class="h1_mock" id="residenti">Residenti</h1>
			<ul>
			<li><a href="#">Mario Rossi</a></li>
			<li><a href="#">Luigi Verdi</a></li>
			<li>...</li>
			</ul>
		</div>
		<div class="content">
			<h1>...</h1>
		</div>
	</div>
</div>

<style>
	.h1_mock {
		color: purple;
	}
	
	.container_mock{
		display: flex;
		align-items: center;
		flex-direction: row;
	}
	.content_mock{
		display: flex;
		width: 100%;
		align-items: center;
		flex-direction: column;
	}

	#b1_mock{
		width: 100%;
		height: 50px;
	}
</style>
</html>

La pagina è *statica*, mostra solo i dati che sono stati caricati dal server.

---

## Javascript nel browser

È possibile interagire con il DOM e con il CSS con Javascript per rendere la pagina **dinamica**.

Sono presenti degli **oggetti** sui quali è possibile fare delle operazioni.

- `window` rappresenta la finestra del browser
- `document` rappresenta il DOM
- `fetch` permette di fare richieste HTTP
- `console`, gia visto, permette di scrivere sulla console

---

## Oggetti in Javascript

Sono *strutture dati* che contengono **proprietà** (variabili) e **metodi** (funzioni).

<div class="container">
<div class="content" style="align-items: unset">

```javascript
let obj = {
	prop_a: "valore",
	prop_b: function() {
		return 10;
	},
	prop_c: {
		prop_a: true,
		prop_b: null
	}
}
```
</div>
<div class="content" style="align-items: unset">

<div class="container">
<div class="content">
<div class="mermaid" style="max-height:17vh;">
%%{init: {'theme': 'neutral', 'mirrorActors': false} }%%
flowchart TD
	A[obj] --> B[prop_a]
	A --> C[prop_b]
	A --> D[prop_c]
	D --> E[prop_a]
	D --> F[prop_b]
</div>
</div>
</div>

</div>
</div>

- **creare un oggetto** `let obj = {}`, viene *istanziato*. `obj` è il *riferimento*
- **assegnare una proprietà** `obj.prop = "valore"` o `obj["prop"] = "valore"`
- **ottenere una proprietà** `obj.prop` o `obj["prop"]`

---

## Array in Javascript

Sono *liste ordinate* di elementi, **iterables** quindi si possono scorrere con un ciclo.

<div class="container">
<div class="content" style="align-items: unset">

```javascript
let obj = {
	0: "elemento_1",
	1: "elemento_2",
	2: "elemento_2",
};

obj[0]; // "elemento_1"
```
</div>
<div class="content" style="align-items: unset">

```javascript
let arr = ["elemento_1",
	"elemento_2", "elemento_3"];

arr[0]; // "elemento_1"

arr.push("elemento_4"); // aggiungi alla fine
arr.pop(); // rimuovi l'ultimo
arr.indexOf("elemento_2"); // 1
```
</div>
</div>

- `for (let i = 0; i < arr.length; i++) { ... }` usa l'indice
- `for (let elem of arr) { ... }` usa l'elemento
- `arr.forEach(function(elem, i) { ... })` usa l'elemento e l'indice

---

## Json

*JavaScript Object Notation* è un formato per scambiare dati. Bisogna *virgolettare* i nomi delle proprietà. Valori, array e oggetti sono valido JSON.
```json
{
	"via": "Vicolo Corto",
	"residenti":
		[
			{
				"nome": "Mario",
				"cognome": "Rossi"
			},
			{
				"nome": "Luigi",
				"cognome": "Verdi"
			}

		]
}
```

---

# Gestione di eventi ed elementi

Il browser rileva gli **eventi**, gestiti con *funzioni di callback* 

```html
<div class="container">
	<button id="b1">Clicca</button>
</div>
<script>
	document.getElementById("b1").addEventListener("click", function() {
		let elem = document.createElement("div");
		elem.innerHTML = "Cliccato"; 
		elem.setAttribute("class", "content");
		elem.style.color = "red";
		elem.attributes; // [class="content", style="color: red;"]
		document.getElementsByClassName("container")[0]
		.appendChild(elem); });
</script>
```

```html
<div class="container">
	<button id="b1">Clicca</button>
	<div style="color: red" class="content">Cliccato</div> 
</div>
```
